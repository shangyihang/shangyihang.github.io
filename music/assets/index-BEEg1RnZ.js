import{_ as e,r as a,g as l,a as t,o as n,b as s,E as o,c as u,d as i,e as d,f as c,h as r,i as p,w as v,u as m,s as y,j as f,k as g,l as b,m as h,n as _,t as x,p as w,q as S,F as k,v as q,x as Q,y as N}from"./index-BStwpT9A.js";import{s as C,A as V,C as j}from"./index-CBsMvNin.js";const B=(e=>(q("data-v-a5db7d53"),e=e(),Q(),e))((()=>r("div",{class:"title"},[r("h3",null,"音乐吧, 听你想听~")],-1))),M={class:"search"},F={class:"option"},I=["download","href"],A=e({__name:"MyAPlayer",props:{fixed:{type:Boolean,default:!1},mini:{type:Boolean,default:!1},autoplay:{type:Boolean,default:!1},theme:{type:String,default:"#0088ff"},loop:{type:String,default:"all"},order:{type:String,default:"list"},preload:{type:String,default:"metadata"},volume:{type:Number,default:.7,validator:e=>e>=0&&e<=1},mutex:{type:Boolean,default:!0},lrcType:{type:Number,default:1},list:{type:Array,default:[]},listFolded:{type:Boolean,default:!1},listMaxHeight:{type:String,default:"calc(100vh - 300px)"},storageName:{type:String,default:"aplayer-setting"}},setup(e){const q=a();a();const Q=a("");a("6995509077");const N=a(!1),A=a("netease"),H=a({}),T=a([]);l();const U=t({instance:null,instance2:null}),J=e;n((()=>{U.instance=new V({container:q.value,fixed:J.fixed,mini:J.mini,autoplay:J.autoplay,theme:J.theme,loop:J.loop,order:J.order,preload:J.preload,volume:.5,mutex:J.mutex,lrcType:J.lrcType,listFolded:J.listFolded,listMaxHeight:J.listMaxHeight,storageName:J.storageName}),O("起风了"),U.instance.on("listswitch",(e=>{const a=e.index;H.value=T.value[a]}))})),s((()=>{U.instance.destroy()}));const O=async e=>{var a,l;null==(l=null==(a=U.instance)?void 0:a.list)||l.clear(),N.value=!0;let t={format:"json",type:1};try{"qq2"===A.value?(t.q=e,t.p=1,t.n=15,t.isQQ=!0):(t.text=e,t.site=A.value,t.page="1");let{data:a,list:l,code:n}=await(async e=>{let a="/Music";const l={params:e};return(null==e?void 0:e.isQQ)&&(a="/qqmusic/demo.php",l.baseURL="https://zj.v.api.aa1.cn/api"),await C.get(a,l)})(t);200===n&&((null==t?void 0:t.isQQ)?T.value=l.map((e=>({...e,artist:e.singer,url:e.url}))):T.value=a.map((e=>({name:e.title,artist:e.author,url:e.url,cover:e.pic,lrc:e.lrc}))),U.instance.list.add(T.value))}catch(n){o({type:"warning",message:n.msg,center:!0})}N.value=!1},P=async()=>{Q.value||(Q.value="起风了"),await O(Q.value)},R=()=>{const e=JSON.parse(localStorage.getItem("collects")||"[]");if(e.findIndex((e=>e.name===H.value.name&&e.artist===H.value.artist))>-1)return o({type:"warning",message:"歌曲已存在！",center:!0});const a=e.concat([H.value]);localStorage.setItem("collects",JSON.stringify(a)),o({type:"success",message:"收藏成功！",center:!0})},z=e=>{const a=new j(".copy-btn",{text:()=>e});a.on("success",(()=>{a.destroy()})),a.on("error",(()=>{a.destroy()})),o({type:"success",message:"已复制到剪贴板！",center:!0})};return(e,a)=>{const l=u("el-option"),t=u("el-select"),n=u("el-button"),s=u("el-input"),o=u("el-col"),C=u("el-row"),V=u("el-tooltip"),j=u("el-collapse-item"),T=u("el-collapse"),U=i("loading");return d(),c(k,null,[B,r("div",M,[p(s,{modelValue:Q.value,"onUpdate:modelValue":a[1]||(a[1]=e=>Q.value=e),placeholder:"请输入歌名，例：起风了",class:"input-with-select",clearable:"",onKeyup:f(P,["enter"]),style:{width:"100%"}},{prepend:v((()=>[p(t,{modelValue:A.value,"onUpdate:modelValue":a[0]||(a[0]=e=>A.value=e),placeholder:"Select",style:{width:"110px"},onChange:P},{default:v((()=>[p(l,{label:"网易云",value:"netease"}),p(l,{label:"QQ音乐（建议用）",value:"qq2"}),p(l,{label:"酷狗",value:"kugou"}),p(l,{label:"咪咕",value:"migu"})])),_:1},8,["modelValue"])])),append:v((()=>[p(n,{icon:m(y),onClick:P},null,8,["icon"])])),_:1},8,["modelValue"])]),r("div",F,[p(T,null,{default:v((()=>[p(j,{title:"当前歌曲信息"},{default:v((()=>[p(C,{gutter:24},{default:v((()=>[p(o,{span:12},{default:v((()=>[p(s,{disabled:!0,value:H.value.name},{prepend:v((()=>[p(n,{icon:m(g),disabled:!0},null,8,["icon"])])),append:v((()=>[p(n,{class:"copy-btn",icon:m(b),onClick:a[2]||(a[2]=e=>z(H.value.name))},null,8,["icon"])])),_:1},8,["value"])])),_:1}),p(o,{span:12},{default:v((()=>[p(s,{disabled:!0,value:H.value.artist},{prepend:v((()=>[p(n,{icon:m(h),disabled:!0},null,8,["icon"])])),append:v((()=>[p(n,{class:"copy-btn",icon:m(b),onClick:a[3]||(a[3]=e=>z(H.value.artist))},null,8,["icon"])])),_:1},8,["value"])])),_:1})])),_:1}),p(C,{span:24},{default:v((()=>[p(V,{content:"音乐链接",placement:"top"},{default:v((()=>[p(s,{disabled:!0,value:H.value.url},{prepend:v((()=>[p(n,{icon:m(_),disabled:!0},null,8,["icon"])])),append:v((()=>[r("a",{target:"_blank",download:`${H.value.name}.mp3`,href:H.value.url},[p(n,{icon:m(x)},null,8,["icon"])],8,I)])),_:1},8,["value"])])),_:1})])),_:1}),p(C,{span:24},{default:v((()=>[p(V,{content:"收藏",placement:"top"},{default:v((()=>[p(n,{class:"download-btn",icon:m(w),onClick:R},null,8,["icon"])])),_:1})])),_:1})])),_:1})])),_:1})]),S(r("div",{class:"aPlayer",ref_key:"playerRef",ref:q},null,512),[[U,N.value]])],64)}}},[["__scopeId","data-v-a5db7d53"]]),H={__name:"index",setup:e=>(e,a)=>(d(),N(A))};export{H as default};
